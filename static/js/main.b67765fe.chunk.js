(this.webpackJsonpblogcontroller=this.webpackJsonpblogcontroller||[]).push([[0],{19:function(e,t,c){},29:function(e,t,c){"use strict";c.r(t);var n=c(1),s=c.n(n),o=c(12),a=c.n(o),i=(c(19),c(2)),r=c(5),j=c(0),l=function(e){return Object(j.jsxs)("div",{className:"singlePost",children:[Object(j.jsx)("div",{className:"titleSection",children:e.data.title}),Object(j.jsx)("div",{className:"textSection",children:e.data.text}),Object(j.jsxs)("div",{className:"bottomRow",children:[Object(j.jsx)("div",{children:e.data.date}),Object(j.jsxs)("div",{className:"rightSide bottom",children:[Object(j.jsx)("div",{children:e.data.published?"Unpublish":"Publish"}),Object(j.jsx)(r.b,{to:"/post/"+e.data._id,children:Object(j.jsx)("span",{children:"View Post"})})]})]})]})},d=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),c=t[0],s=t[1],o=Object(n.useState)(!1),a=Object(i.a)(o,2),r=a[0],d=a[1];return Object(n.useEffect)((function(){d(!0),fetch("https://dcblogapi.herokuapp.com/api/post",{credentials:"include"}).then((function(e){return e.json()})).then((function(e){s(e),d(!1)})).catch((function(e){throw new Error("Failed to fetch api")}))}),[]),r?Object(j.jsx)("div",{children:"Loading"}):Object(j.jsx)("div",{children:0===c.length?Object(j.jsx)("div",{children:"No posts found"}):c.map((function(e){return Object(j.jsx)(l,{data:e})}))})},b=c(3),u=function(){return Object(j.jsxs)("div",{className:"navBar",children:[Object(j.jsx)("div",{className:"logo",children:Object(j.jsx)("div",{children:"Blog Controller"})}),Object(j.jsxs)("div",{className:"navSection",children:[Object(j.jsx)(r.b,{className:"navLink",to:"/",children:Object(j.jsx)("span",{children:"Posts"})}),Object(j.jsx)(r.b,{className:"navLink",to:"/create",children:Object(j.jsx)("span",{children:"Create Post"})}),Object(j.jsx)(r.b,{className:"navLink",to:"/login",children:Object(j.jsx)("span",{children:"Login"})})]})]})},h=function(){var e=Object(n.useRef)(null),t=Object(n.useRef)(null),c=Object(n.useState)(!1),s=Object(i.a)(c,2),o=s[0],a=s[1],r=Object(n.useState)([]),l=Object(i.a)(r,2),d=l[0],u=l[1],h=Object(n.useState)(""),O=Object(i.a)(h,2),p=O[0],m=O[1];return Object(n.useEffect)((function(){""!==p&&a(!0)}),[p]),o?Object(j.jsx)(b.a,{to:"/post/".concat(p)}):Object(j.jsxs)("div",{children:[Object(j.jsx)("div",{className:"errorContainer",children:d.map((function(e){return Object(j.jsx)("div",{children:e.msg})}))}),Object(j.jsxs)("form",{className:"submitForm",type:"submit",children:[Object(j.jsx)("label",{for:"title",children:"Title"}),Object(j.jsx)("input",{ref:e,type:"text",id:"title",name:"title"}),Object(j.jsx)("label",{for:"text",children:"Text"}),Object(j.jsx)("textarea",{ref:t,type:"text",id:"text",name:"text"}),Object(j.jsx)("button",{onClick:function(c){c.preventDefault(),fetch("https://dcblogapi.herokuapp.com/api/post",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:e.current.value,text:t.current.value})}).then((function(e){return e.json()})).then((function(e){console.log(e),e.errors?u(e.errors):m(e._id)})).catch((function(e){throw new Error(e)}))},type:"submit",children:"Submit"})]})]})},O=function(e){var t=Object(n.useState)({}),c=Object(i.a)(t,2),s=c[0],o=c[1],a=Object(n.useState)([]),l=Object(i.a)(a,2),d=l[0],b=l[1],u=Object(n.useState)([]),h=Object(i.a)(u,2),O=h[0],p=h[1],m=Object(n.useState)(!0),x=Object(i.a)(m,2),f=x[0],v=x[1],g=Object(n.useRef)(null),S=Object(n.useRef)(null);Object(n.useEffect)((function(){var t=fetch("https://dcblogapi.herokuapp.com/api/post/".concat(e.match.params.id),{credentials:"include"}),c=fetch("https://dcblogapi.herokuapp.com/api/post/".concat(e.match.params.id,"/comment"),{credentials:"include"});Promise.all([t,c]).then((function(e){var t=Object(i.a)(e,2),c=t[0],n=t[1];return Promise.all([c.json(),n.json()])})).then((function(e){v(!1),e[0].errors?p(e[0].errors):(o(e[0]),b(e[1]))})).catch((function(e){console.log(e)}))}),[]);return f?Object(j.jsx)("div",{children:"Loading"}):0!==O.length?Object(j.jsx)("div",{children:O}):Object(j.jsxs)("div",{children:[Object(j.jsxs)("div",{className:"viewPost",children:[Object(j.jsx)("div",{children:s.title}),Object(j.jsx)("div",{children:s.text}),Object(j.jsx)("div",{children:s.date}),Object(j.jsx)(r.b,{to:"/post/".concat(e.match.params.id,"/delete"),children:Object(j.jsx)("span",{children:"Delete Post"})}),Object(j.jsx)(r.b,{to:"/post/".concat(e.match.params.id,"/update"),children:Object(j.jsx)("span",{children:"Update Post"})})]}),Object(j.jsx)("div",{className:"commentSection",children:d.map((function(t){return Object(j.jsxs)("div",{className:"comment",children:[Object(j.jsx)("div",{children:t.name}),Object(j.jsx)("div",{children:t.text}),Object(j.jsx)(r.b,{to:"/post/".concat(e.match.params.id,"/comment/").concat(t._id),children:Object(j.jsx)("span",{children:"Delete Comment"})})]})}))}),Object(j.jsx)("div",{className:"formContainer",children:Object(j.jsxs)("form",{className:"createComment",children:[Object(j.jsx)("label",{for:"name",children:"Name"}),Object(j.jsx)("input",{ref:g,id:"name",name:"name"}),Object(j.jsx)("label",{for:"text",children:"Text"}),Object(j.jsx)("input",{ref:S,id:"text",name:"text"}),Object(j.jsx)("button",{onClick:function(t){t.preventDefault(),fetch("https://dcblogapi.herokuapp.com/api/post/".concat(e.match.params.id,"/comment"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:g.current.value,text:S.current.value,id:e.match.params.id})}).then((function(e){return e.json()})).then((function(e){window.location.reload()})).catch((function(e){console.log(e)}))},children:"Submit Comment"})]})})]})},p=function(){var e=Object(n.useRef)(null),t=Object(n.useRef)(null),c=Object(n.useState)([]),s=Object(i.a)(c,2),o=s[0],a=s[1],r=Object(n.useState)(!1),l=Object(i.a)(r,2),d=l[0],u=l[1],h=Object(n.useState)(!1),O=Object(i.a)(h,2),p=O[0],m=O[1];return Object(n.useEffect)((function(){d&&setTimeout((function(){m(!0)}),2e3)}),[d]),p?Object(j.jsx)(b.a,{to:"/"}):Object(j.jsxs)("form",{className:"loginForm",type:"submit",children:[Object(j.jsx)("div",{className:"successSection",children:d?Object(j.jsx)("div",{children:"Login successful, Redirecting shortly"}):Object(j.jsx)(j.Fragment,{})}),Object(j.jsx)("div",{className:"errorSection",children:o.map((function(e){return Object(j.jsx)("div",{children:e.msg})}))}),Object(j.jsxs)("div",{className:"inputWrapper",children:[Object(j.jsx)("div",{children:"Login"}),Object(j.jsxs)("div",{className:"inputSection",children:[Object(j.jsx)("label",{for:"username",children:"Username"}),Object(j.jsx)("input",{ref:e,id:"username",name:"username"})]}),Object(j.jsxs)("div",{className:"inputSection",children:[Object(j.jsx)("label",{for:"password",children:"Password"}),Object(j.jsx)("input",{ref:t,id:"password",name:"password"})]}),Object(j.jsx)("button",{className:"submitBtn",onClick:function(c){c.preventDefault(),fetch("https://dcblogapi.herokuapp.com/api/login",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e.current.value,password:t.current.value})}).then((function(e){return e.json()})).then((function(e){e.errors?a(e.errors):(a([]),u(!0))})).catch((function(e){console.log(e)}))},children:"Submit"})]})]})},m=function(e){var t=Object(n.useState)({}),c=Object(i.a)(t,2),s=c[0],o=c[1],a=Object(n.useState)({}),r=Object(i.a)(a,2),l=(r[0],r[1]),d=Object(n.useState)(!1),u=Object(i.a)(d,2),h=u[0],O=u[1],p=Object(n.useState)(!1),m=Object(i.a)(p,2),x=m[0],f=m[1];Object(n.useEffect)((function(){fetch("https://dcblogapi.herokuapp.com/api/post/".concat(e.match.params.id,"/comment/").concat(e.match.params.commentId)).then((function(e){return e.json()})).then((function(e){e.errors?l(e.errors):o(e)})).catch((function(e){console.log(e)}))}),[]);return x?Object(j.jsx)(b.a,{to:"/post/".concat(e.match.params.id)}):Object(j.jsxs)("div",{children:[Object(j.jsx)("div",{children:s.name}),Object(j.jsx)("div",{children:s.text}),Object(j.jsx)("button",{onClick:function(){O(!0)},children:"Delete this comment?"}),h?Object(j.jsxs)("div",{children:[Object(j.jsx)("button",{onClick:function(t){t.preventDefault(),fetch("https://dcblogapi.herokuapp.com/api/post/".concat(e.match.params.id,"/comment/").concat(e.match.params.commentId),{method:"DELETE",credentials:"include"}).then((function(e){return e.json()})).then((function(e){console.log(e),f(!0)})).catch((function(e){console.log(e)}))},children:"Confirm"}),Object(j.jsx)("button",{onClick:function(){O(!1)},children:"Cancel"})]}):Object(j.jsx)(j.Fragment,{})]})},x=function(e){var t=Object(n.useState)({}),c=Object(i.a)(t,2),s=c[0],o=c[1],a=Object(n.useState)([]),r=Object(i.a)(a,2),l=(r[0],r[1],Object(n.useState)(!0)),d=Object(i.a)(l,2),u=d[0],h=d[1],O=Object(n.useState)(!1),p=Object(i.a)(O,2),m=p[0],x=p[1],f=Object(n.useState)(!1),v=Object(i.a)(f,2),g=v[0],S=v[1];Object(n.useEffect)((function(){fetch("https://dcblogapi.herokuapp.com/api/post/".concat(e.match.params.id),{credentials:"include"}).then((function(e){return e.json()})).then((function(e){console.log(e),o(e),h(!1)})).catch((function(e){console.log(e)}))}),[]);return u?Object(j.jsx)("div",{children:"Loading"}):g?Object(j.jsx)(b.a,{to:"/"}):Object(j.jsxs)("div",{className:"DeletePost",children:[Object(j.jsx)("div",{children:s.title}),Object(j.jsx)("div",{children:s.text}),Object(j.jsx)("div",{children:s.date}),Object(j.jsx)("button",{onClick:function(){x(!0)},children:"Delete this comment?"}),m?Object(j.jsxs)("div",{children:[Object(j.jsx)("button",{onClick:function(t){t.preventDefault(),fetch("https://dcblogapi.herokuapp.com/api/post/".concat(e.match.params.id),{method:"DELETE",credentials:"include"}).then((function(e){return e.json()})).then((function(e){console.log(e),S(!0)})).catch((function(e){console.log(e)}))},children:"Confirm"}),Object(j.jsx)("button",{onClick:function(){x(!1)},children:"Cancel"})]}):Object(j.jsx)(j.Fragment,{})]})},f=function(e){var t=Object(n.useState)({}),c=Object(i.a)(t,2),s=c[0],o=c[1],a=Object(n.useState)([]),r=Object(i.a)(a,2),l=(r[0],r[1],Object(n.useState)(!0)),d=Object(i.a)(l,2),b=(d[0],d[1]),u=Object(n.useRef)(null),h=Object(n.useRef)(null);Object(n.useEffect)((function(){fetch("https://dcblogapi.herokuapp.com/api/post/".concat(e.match.params.id)).then((function(e){return e.json()})).then((function(e){o(e),b(!1)})).catch((function(e){console.log(e)}))}),[]);return Object(j.jsx)("div",{children:Object(j.jsxs)("form",{children:[Object(j.jsx)("input",{ref:u,defaultValue:s.title}),Object(j.jsx)("input",{ref:h,defaultValue:s.text}),Object(j.jsx)("button",{onClick:function(t){t.preventDefault(),fetch("https://dcblogapi.herokuapp.com/api/post/".concat(e.match.params.id),{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:u.current.value,text:h.current.value})}).then((function(e){return e.json()})).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))},children:"Update post"})]})})};var v=function(){return Object(j.jsxs)(r.a,{children:[Object(j.jsx)(u,{}),Object(j.jsxs)(b.d,{children:[Object(j.jsx)(b.b,{exact:!0,path:"/",component:d}),Object(j.jsx)(b.b,{exact:!0,path:"/create",component:h}),Object(j.jsx)(b.b,{exact:!0,path:"/post/:id",component:O}),Object(j.jsx)(b.b,{exact:!0,path:"/login",component:p}),Object(j.jsx)(b.b,{exact:!0,path:"/post/:id/comment/:commentId",component:m}),";",Object(j.jsx)(b.b,{exact:!0,path:"/post/:id/delete",component:x}),Object(j.jsx)(b.b,{exact:!0,path:"/post/:id/update",component:f})]})]})};a.a.render(Object(j.jsx)(s.a.StrictMode,{children:Object(j.jsx)(v,{})}),document.getElementById("root"))}},[[29,1,2]]]);
//# sourceMappingURL=main.b67765fe.chunk.js.map